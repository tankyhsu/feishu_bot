# é£ä¹¦æ™ºèƒ½é¡¹ç›®ç®¡ç†æœºå™¨äºº (Dobby) - v2.4

åŸºäºé£ä¹¦é›†æˆå¹³å°ä¸ DeepSeek å¤§æ¨¡å‹çš„æ™ºèƒ½åŠ©æ‰‹ï¼Œé›†æˆäº†**æ™ºèƒ½ä»»åŠ¡ç®¡ç†**ã€**ä¼šè®®çºªè¦ç”Ÿæˆ**ä¸**RSS æ–°é—»æ—©æŠ¥**ä¸‰å¤§æ ¸å¿ƒèƒ½åŠ›ï¼Œæ‰“é€ å…¨èƒ½å‹å›¢é˜ŸåŠ©ç†ã€‚

## ğŸŒŸ æ ¸å¿ƒåŠŸèƒ½

### 1. ğŸ“° RSS æ–°é—»æ—©æŠ¥ (New!)
- **å¤šæºèšåˆ**: æ”¯æŒé…ç½®å¤šä¸ª RSS è®¢é˜…æº (TechCrunch, Hacker News ç­‰)ã€‚
- **AI æ™ºèƒ½æ€»ç»“**: æ¯å¤©å®šæ—¶æŠ“å–æœ€æ–°æ–‡ç« ï¼Œåˆ©ç”¨ DeepSeek è¿›è¡Œå»é‡ã€åˆ†ç±»å’Œä¸€å¥è¯æ€»ç»“ã€‚
- **ç²¾ç¾æ–‡æ¡£ç”Ÿæˆ**: è‡ªåŠ¨ç”Ÿæˆå›¾æ–‡å¹¶èŒ‚çš„é£ä¹¦äº‘æ–‡æ¡£ï¼ˆå«æ ‡é¢˜ã€æ‘˜è¦ã€åŸæ–‡é“¾æ¥ï¼‰ï¼Œæ’ç‰ˆæ•´æ´ç¾è§‚ã€‚
- **ç¾¤ç»„æ¨é€**: 
    - **è¢«åŠ¨è§¦å‘**: åœ¨ç¾¤é‡Œå‘é€ "RSS" æˆ– "æ—©æŠ¥" å³å¯ç«‹å³è·å–ã€‚
    - **å®šæ—¶æ¨é€**: æ”¯æŒ launchd å®šæ—¶ä»»åŠ¡ï¼Œæ¯å¤©æ—©æ™¨å‡†æ—¶æ¨é€æ—©æŠ¥æ–‡æ¡£é“¾æ¥ã€‚

### 2. ğŸ§  AI è¯­ä¹‰ç†è§£ (DeepSeek)
- **è‡ªç„¶è¯­è¨€åˆ›å»º**: "å¸®æˆ‘å®‰æ’æ˜å¤©ä¿®ä¸€ä¸‹é¦–é¡µBugï¼ŒæŒºæ€¥çš„" -> è‡ªåŠ¨è¯†åˆ«ä»»åŠ¡ã€æ—¶é—´ã€ç´§æ€¥ç¨‹åº¦ã€‚
- **æ™ºèƒ½è´Ÿè´£äººåˆ†é…**: è‡ªåŠ¨è¯†åˆ« `@æåŠ` çš„æˆå‘˜å¹¶åˆ†é…ä»»åŠ¡ï¼Œæ™ºèƒ½æ’é™¤æœºå™¨äººè‡ªå·±ã€‚
- **åŸç”Ÿä»»åŠ¡è”åŠ¨**: ä»…å½“ç”¨æˆ·æåˆ° "æé†’æˆ‘"ã€"å»ºä¸ªä»»åŠ¡" æ—¶ï¼ŒåŒæ­¥åˆ›å»ºé£ä¹¦åŸç”Ÿ Task (Task V2)ã€‚

### 3. ğŸ“ ä¼šè®®çºªè¦åŠ©æ‰‹
- **å¦™è®°è§£æ**: å‘é€é£ä¹¦å¦™è®°é“¾æ¥ï¼Œæœºå™¨äººè‡ªåŠ¨æŠ“å–å­—å¹•ã€‚
- **AI æç‚¼**: è‡ªåŠ¨æ€»ç»“ä¼šè®®æ‘˜è¦ã€Action Itemsï¼Œå¹¶ç”Ÿæˆé£ä¹¦äº‘æ–‡æ¡£å½’æ¡£ã€‚

### 4. ğŸ“Š å››è±¡é™ä»»åŠ¡ç®¡ç†
é‡‡ç”¨ç§‘å­¦çš„æ—¶é—´ç®¡ç†æ³•åˆ™ (Eisenhower Matrix)ï¼Œè‡ªåŠ¨æ ‡è®°ä»»åŠ¡ä¼˜å…ˆçº§ (é‡è¦ä¸”ç´§æ€¥ç­‰)ã€‚

---

## ğŸ›  æŠ€æœ¯æ¶æ„

- **è¯­è¨€**: Python 3.9+
- **æ¡†æ¶**: `lark-oapi`, `feedparser`
- **AI æ¨¡å‹**: DeepSeek V3
- **è¿›ç¨‹ç®¡ç†**: `Supervisor` (é€šè¿‡ `launchd` ç®¡ç†)
- **æ•°æ®å­˜å‚¨**: é£ä¹¦å¤šç»´è¡¨æ ¼ (Bitable) + é£ä¹¦äº‘æ–‡æ¡£ (Docx)

### æ–‡ä»¶ç»“æ„
```
.
â”œâ”€â”€ main.py             # ä¸»ç¨‹åºå…¥å£
â”œâ”€â”€ config.py           # é…ç½®åŠ è½½å™¨
â”œâ”€â”€ handlers/           # æ¶ˆæ¯ä¸äº‹ä»¶å¤„ç†å™¨
â”œâ”€â”€ services/           # æ ¸å¿ƒæœåŠ¡å±‚
â”‚   â”œâ”€â”€ llm_service.py  # AI æœåŠ¡ (DeepSeek)
â”‚   â”œâ”€â”€ rss_service.py  # RSS æŠ“å–ä¸æ–‡æ¡£ç”Ÿæˆ
â”‚   â”œâ”€â”€ doc_service.py  # é£ä¹¦æ–‡æ¡£æ“ä½œ (Block æ„å»º)
â”‚   â””â”€â”€ ...
â”œâ”€â”€ scripts/            # å·¥å…·è„šæœ¬
â”‚   â””â”€â”€ daily_push.py   # å®šæ—¶æ¨é€è„šæœ¬
â””â”€â”€ supervisord.conf    # è¿›ç¨‹å®ˆæŠ¤é…ç½®
```

## éƒ¨ç½² (Deployment)

æœ¬é¡¹ç›®æ”¯æŒ macOS æœ¬åœ°éƒ¨ç½²ï¼Œä½¿ç”¨ `launchd` è¿›è¡Œè¿›ç¨‹å®ˆæŠ¤å’Œå®šæ—¶ä»»åŠ¡è°ƒåº¦ã€‚

### 1. è‡ªåŠ¨éƒ¨ç½²

æœ¬é¡¹ç›®æä¾›äº†è‡ªåŠ¨å®‰è£…è„šæœ¬ï¼Œæ”¯æŒåœ¨ä»»æ„ç›®å½•ä¸‹éƒ¨ç½²ï¼Œè„šæœ¬ä¼šè‡ªåŠ¨è¯†åˆ«å½“å‰è·¯å¾„å¹¶é…ç½®ç³»ç»ŸæœåŠ¡ã€‚

1.  **å‡†å¤‡ä»£ç **
    å°†ä»£ç å…‹éš†åˆ°ä½ å¸Œæœ›éƒ¨ç½²çš„ç›®å½•ï¼ˆå»ºè®®ä½¿ç”¨ç”¨æˆ·ä¸»ç›®å½•ä¸‹çš„æ–‡ä»¶å¤¹ï¼Œä¾‹å¦‚ `~/feishu_bot`ï¼Œä»¥é¿å…æƒé™é—®é¢˜ï¼‰ï¼š
    ```bash
    git clone https://github.com/your-repo/feishu_bot.git ~/feishu_bot
    cd ~/feishu_bot
    ```

2.  **åˆ›å»ºç¯å¢ƒ**
    ```bash
    # åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
    python3 -m venv venv
    
    # å®‰è£…ä¾èµ–
    ./venv/bin/pip install -r requirements.txt
    
    # å®‰è£… supervisor (ç”¨äºè¿›ç¨‹å®ˆæŠ¤)
    ./venv/bin/pip install supervisor
    ```

3.  **å®‰è£…æœåŠ¡**
    ç›´æ¥è¿è¡Œå®‰è£…è„šæœ¬å³å¯ï¼Œæ— éœ€æ‰‹åŠ¨ä¿®æ”¹é…ç½®æ–‡ä»¶è·¯å¾„ï¼š
    ```bash
    sh install_autostart.sh
    ```
    
    è„šæœ¬ä¼šæ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š
    *   è‡ªåŠ¨è¯†åˆ«å½“å‰é¡¹ç›®è·¯å¾„ã€‚
    *   ç”Ÿæˆé€‚é…å½“å‰è·¯å¾„çš„ç³»ç»Ÿé…ç½®æ–‡ä»¶ (`.plist`)ã€‚
    *   æ³¨å†Œåå°å®ˆæŠ¤è¿›ç¨‹ (`com.feishu.bot.supervisor`)ã€‚
    *   æ³¨å†Œæ¯æ—¥å®šæ—¶æ¨é€ä»»åŠ¡ (`com.feishu.bot.daily_push`)ã€‚

### 2. ç®¡ç†æœåŠ¡

*   **æŸ¥çœ‹è¿è¡Œæ—¥å¿—**ï¼š
    æ—¥å¿—é»˜è®¤ä½äºé¡¹ç›®ç›®å½•ä¸‹çš„ `logs/` æ–‡ä»¶å¤¹ä¸­ã€‚
    ```bash
    # æŸ¥çœ‹ä¸»ç¨‹åºæ—¥å¿—
    tail -f logs/bot_out.log logs/bot_err.log
    
    # æŸ¥çœ‹ Supervisor å®ˆæŠ¤è¿›ç¨‹æ—¥å¿—
    tail -f logs/supervisord.log
    ```

*   **æ‰‹åŠ¨åœæ­¢/é‡å¯**ï¼š
    å¯ä»¥ä½¿ç”¨æä¾›çš„è¾…åŠ©è„šæœ¬ï¼š
    ```bash
    sh stop.sh    # åœæ­¢æœåŠ¡
    sh start.sh   # å¯åŠ¨æœåŠ¡
    sh restart.sh # é‡å¯æœåŠ¡
    ```

*   **å¸è½½æœåŠ¡**ï¼š
    å¦‚æœéœ€è¦ç§»é™¤è‡ªåŠ¨å¯åŠ¨ä»»åŠ¡ï¼š
    ```bash
    launchctl unload ~/Library/LaunchAgents/com.feishu.bot.supervisor.plist
    launchctl unload ~/Library/LaunchAgents/com.feishu.bot.daily_push.plist
    rm ~/Library/LaunchAgents/com.feishu.bot.supervisor.plist
    rm ~/Library/LaunchAgents/com.feishu.bot.daily_push.plist
    ```

## ç›®å½•ç»“æ„


## ğŸ“ æ›´æ–°æ—¥å¿—

### v2.4 (Current)
- **Feature**: æ–°å¢ RSS è®¢é˜…æœåŠ¡ï¼Œæ”¯æŒå¤šæºæŠ“å–ã€‚
- **Feature**: æ–°å¢è‡ªåŠ¨ç”Ÿæˆé£ä¹¦ RSS æ—©æŠ¥æ–‡æ¡£åŠŸèƒ½ (Title + Summary + Link)ã€‚
- **Feature**: æ–°å¢ `scripts/daily_push.py` ç”¨äºå®šæ—¶æ¨é€ã€‚
- **Refactor**: é‡æ„ `DocService`ï¼Œæ”¯æŒæ›´ä¸°å¯Œçš„æ–‡æ¡£å—æ“ä½œã€‚

### v2.3
- **Feature**: æ”¯æŒåˆ›å»ºé£ä¹¦åŸç”Ÿä»»åŠ¡ (Task V2)ã€‚
- **Optimization**: ä¼˜åŒ– AI æ„å›¾è¯†åˆ«ä¸è´Ÿè´£äººåˆ†é…é€»è¾‘ã€‚
